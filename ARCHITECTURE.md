# ğŸ—ï¸ Blinket Platform - Architecture Overview

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT BROWSER                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              React.js Frontend (Port 3000)               â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚   Pages    â”‚  â”‚ Components â”‚  â”‚  Context (State)â”‚  â”‚  â”‚
â”‚  â”‚  â”‚            â”‚  â”‚            â”‚  â”‚                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Home     â”‚  â”‚ â€¢ Header   â”‚  â”‚ â€¢ AuthContext  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Products â”‚  â”‚ â€¢ Footer   â”‚  â”‚ â€¢ CartContext  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Cart     â”‚  â”‚ â€¢ Cards    â”‚  â”‚                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Checkout â”‚  â”‚ â€¢ Routes   â”‚  â”‚                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Admin    â”‚  â”‚            â”‚  â”‚                 â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚         API Layer (Axios)                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ authApi  â€¢ productApi  â€¢ orderApi  â€¢ adminApiâ”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                  â”‚
â”‚                              â”‚ HTTP/HTTPS + Cookies             â”‚
â”‚                              â–¼                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend Server (Port 5000)                   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   Express.js API                         â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚              Middleware Layer                      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ CORS  â€¢ Cookie Parser  â€¢ JSON Parser           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Auth Middleware  â€¢ Admin Middleware            â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚                  Routes                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  /api/users  /api/products  /api/orders  /api/adminâ”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                          â”‚                               â”‚  â”‚
â”‚  â”‚                          â–¼                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚               Controllers                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ userController    â€¢ productController          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ orderController   â€¢ adminController            â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                          â”‚                               â”‚  â”‚
â”‚  â”‚                          â–¼                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚              Prisma ORM Layer                      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ User Model    â€¢ Product Model                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Order Model   â€¢ OrderItem Model                â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚              External Services                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ SendGrid (Email)  â€¢ JWT (Auth)                 â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                  â”‚
â”‚                              â–¼                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MongoDB Atlas (Cloud)                        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚    Users     â”‚  â”‚   Products   â”‚  â”‚    Orders    â”‚         â”‚
â”‚  â”‚  Collection  â”‚  â”‚  Collection  â”‚  â”‚  Collection  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚  OrderItems  â”‚                                              â”‚
â”‚  â”‚  Collection  â”‚                                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagrams

### 1. User Registration & Login Flow

```
User Browser                Backend API              MongoDB        SendGrid
     â”‚                          â”‚                       â”‚              â”‚
     â”‚â”€â”€Register Requestâ”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚              â”‚
     â”‚   (email, password)       â”‚                       â”‚              â”‚
     â”‚                           â”‚â”€â”€Hash Passwordâ”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚
     â”‚                           â”‚â”€â”€Generate OTPâ”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚
     â”‚                           â”‚â”€â”€Save Userâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚
     â”‚                           â”‚                       â”‚              â”‚
     â”‚                           â”‚â”€â”€Send Email OTPâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚<â”€â”€Success Responseâ”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚              â”‚
     â”‚                           â”‚                       â”‚              â”‚
     â”‚â”€â”€Verify Email (OTP)â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚              â”‚
     â”‚                           â”‚â”€â”€Check OTPâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚
     â”‚                           â”‚â”€â”€Update isVerifiedâ”€â”€â”€â”€>â”‚              â”‚
     â”‚<â”€â”€Verification Successâ”€â”€â”€â”€â”‚                       â”‚              â”‚
     â”‚                           â”‚                       â”‚              â”‚
     â”‚â”€â”€Login Requestâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚              â”‚
     â”‚   (email, password)       â”‚                       â”‚              â”‚
     â”‚                           â”‚â”€â”€Find Userâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚
     â”‚                           â”‚â”€â”€Verify Passwordâ”€â”€â”€â”€â”€â”€>â”‚              â”‚
     â”‚                           â”‚â”€â”€Generate JWT Tokensâ”€â”€>â”‚              â”‚
     â”‚<â”€â”€Set HttpOnly Cookiesâ”€â”€â”€â”€â”‚                       â”‚              â”‚
     â”‚<â”€â”€User Dataâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚              â”‚
```

### 2. Product Browsing & Cart Flow

```
User Browser              Frontend State           Backend API         MongoDB
     â”‚                         â”‚                        â”‚                 â”‚
     â”‚â”€â”€View Productsâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚                 â”‚
     â”‚                          â”‚â”€â”€Fetch Productsâ”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
     â”‚                          â”‚                        â”‚â”€â”€Query DBâ”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                          â”‚<â”€â”€Products Dataâ”€â”€â”€â”€â”€â”€â”€â”€â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚<â”€â”€Display Productsâ”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚                 â”‚
     â”‚                          â”‚                        â”‚                 â”‚
     â”‚â”€â”€Add to Cartâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚                 â”‚
     â”‚                          â”‚â”€â”€Update CartContextâ”€â”€â”€â”€>â”‚                 â”‚
     â”‚                          â”‚â”€â”€Save to localStorageâ”€â”€>â”‚                 â”‚
     â”‚<â”€â”€Cart Count Updatedâ”€â”€â”€â”€â”€â”‚                        â”‚                 â”‚
     â”‚                          â”‚                        â”‚                 â”‚
     â”‚â”€â”€View Cartâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚                 â”‚
     â”‚<â”€â”€Display Cart Itemsâ”€â”€â”€â”€â”€â”‚                        â”‚                 â”‚
     â”‚   (from localStorage)    â”‚                        â”‚                 â”‚
```

### 3. Order Placement Flow

```
User Browser              Backend API              MongoDB           Email
     â”‚                        â”‚                       â”‚               â”‚
     â”‚â”€â”€Checkout Requestâ”€â”€â”€â”€â”€â”€>â”‚                       â”‚               â”‚
     â”‚   (items, address)     â”‚                       â”‚               â”‚
     â”‚                        â”‚â”€â”€Check Authâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
     â”‚                        â”‚â”€â”€Check Verifiedâ”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
     â”‚                        â”‚â”€â”€Validate Stockâ”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
     â”‚                        â”‚â”€â”€Create Orderâ”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
     â”‚                        â”‚â”€â”€Create OrderItemsâ”€â”€â”€â”€>â”‚               â”‚
     â”‚                        â”‚â”€â”€Decrement Stockâ”€â”€â”€â”€â”€â”€>â”‚               â”‚
     â”‚<â”€â”€Order Successâ”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚               â”‚
     â”‚                        â”‚                       â”‚               â”‚
     â”‚â”€â”€Clear Cartâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚               â”‚
     â”‚â”€â”€Navigate to Ordersâ”€â”€â”€â”€>â”‚                       â”‚               â”‚
```

### 4. Admin Product Management Flow

```
Admin Browser            Backend API              MongoDB
     â”‚                       â”‚                       â”‚
     â”‚â”€â”€Create Productâ”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
     â”‚   (with image URLs)   â”‚â”€â”€Check Admin Roleâ”€â”€â”€â”€>â”‚
     â”‚                       â”‚â”€â”€Validate Dataâ”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                       â”‚â”€â”€Create Productâ”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚<â”€â”€Successâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚
     â”‚                       â”‚                       â”‚
     â”‚â”€â”€Update Productâ”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
     â”‚                       â”‚â”€â”€Check Admin Roleâ”€â”€â”€â”€>â”‚
     â”‚                       â”‚â”€â”€Update Productâ”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚<â”€â”€Successâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚
     â”‚                       â”‚                       â”‚
     â”‚â”€â”€Delete Productâ”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
     â”‚                       â”‚â”€â”€Check Admin Roleâ”€â”€â”€â”€>â”‚
     â”‚                       â”‚â”€â”€Delete Productâ”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚<â”€â”€Successâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚
```

## Authentication Flow Detail

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    JWT Token Strategy                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Login Success
     â”‚
     â”œâ”€â”€> Generate Access Token (15 min expiry)
     â”‚    â””â”€â”€> Store in HttpOnly Cookie
     â”‚
     â””â”€â”€> Generate Refresh Token (7 days expiry)
          â””â”€â”€> Store in HttpOnly Cookie

Protected Request
     â”‚
     â”œâ”€â”€> Check Access Token
     â”‚    â”‚
     â”‚    â”œâ”€â”€> Valid? â”€â”€> Allow Request
     â”‚    â”‚
     â”‚    â””â”€â”€> Expired? â”€â”€> Check Refresh Token
     â”‚                      â”‚
     â”‚                      â”œâ”€â”€> Valid? â”€â”€> Generate New Access Token
     â”‚                      â”‚              â””â”€â”€> Allow Request
     â”‚                      â”‚
     â”‚                      â””â”€â”€> Invalid? â”€â”€> Require Login
```

## Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     User     â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ email        â”‚          â”‚
â”‚ password     â”‚          â”‚
â”‚ name         â”‚          â”‚
â”‚ role         â”‚          â”‚ One-to-Many
â”‚ isVerified   â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                          â”‚
                    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                    â”‚   Order    â”‚
                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                    â”‚ id         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ userId     â”‚          â”‚
                    â”‚ status     â”‚          â”‚
                    â”‚ totalAmountâ”‚          â”‚ One-to-Many
                    â”‚ address    â”‚          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                                            â”‚
                                      â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                                      â”‚  OrderItem   â”‚
                                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                                      â”‚ id           â”‚
                                      â”‚ orderId      â”‚
                                      â”‚ productId    â”‚â”€â”€â”€â”
                                      â”‚ quantity     â”‚   â”‚
                                      â”‚ priceAtOrder â”‚   â”‚ Many-to-One
                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                                                         â”‚
                                                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                                                    â”‚ Product  â”‚
                                                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                                                    â”‚ id       â”‚
                                                    â”‚ name     â”‚
                                                    â”‚ price    â”‚
                                                    â”‚ stock    â”‚
                                                    â”‚ category â”‚
                                                    â”‚ imageUrlsâ”‚
                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## State Management Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    React Context API                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AuthContext    â”‚              â”‚   CartContext    â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ â€¢ user           â”‚              â”‚ â€¢ cartItems      â”‚
â”‚ â€¢ loading        â”‚              â”‚ â€¢ addToCart()    â”‚
â”‚ â€¢ isAuthenticatedâ”‚              â”‚ â€¢ removeFromCart()â”‚
â”‚ â€¢ isAdmin        â”‚              â”‚ â€¢ updateQuantity()â”‚
â”‚ â€¢ setUser()      â”‚              â”‚ â€¢ clearCart()    â”‚
â”‚ â€¢ checkAuth()    â”‚              â”‚ â€¢ getCartTotal() â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ â€¢ getCartCount() â”‚
         â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                 â”‚
         â”‚                                 â”‚
         â–¼                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      App Component                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Header  â”‚  â”‚  Routes  â”‚  â”‚  Pages   â”‚  â”‚  Footer  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## API Endpoint Structure

```
/api
â”œâ”€â”€ /users
â”‚   â”œâ”€â”€ POST   /register          (Public)
â”‚   â”œâ”€â”€ POST   /login             (Public)
â”‚   â”œâ”€â”€ GET    /logout            (Public)
â”‚   â”œâ”€â”€ POST   /verify-email      (Public)
â”‚   â”œâ”€â”€ POST   /forgot-password   (Public)
â”‚   â”œâ”€â”€ PUT    /reset-password    (Public)
â”‚   â””â”€â”€ GET    /profile           (Protected)
â”‚
â”œâ”€â”€ /products
â”‚   â”œâ”€â”€ GET    /                  (Public)
â”‚   â””â”€â”€ GET    /:id               (Public)
â”‚
â”œâ”€â”€ /orders
â”‚   â”œâ”€â”€ POST   /                  (Protected + Verified)
â”‚   â””â”€â”€ GET    /my-orders         (Protected)
â”‚
â””â”€â”€ /admin
    â”œâ”€â”€ POST   /products          (Admin Only)
    â”œâ”€â”€ PUT    /products/:id      (Admin Only)
    â”œâ”€â”€ DELETE /products/:id      (Admin Only)
    â”œâ”€â”€ GET    /orders            (Admin Only)
    â””â”€â”€ PUT    /orders/:id        (Admin Only)
```

## Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Security Stack                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 1: Network
â”œâ”€â”€ CORS (Cross-Origin Resource Sharing)
â””â”€â”€ HTTPS (in production)

Layer 2: Authentication
â”œâ”€â”€ JWT Tokens (Access & Refresh)
â”œâ”€â”€ HttpOnly Cookies (XSS Protection)
â””â”€â”€ Token Expiry (15 min / 7 days)

Layer 3: Authorization
â”œâ”€â”€ Protected Routes (authenticate middleware)
â”œâ”€â”€ Admin Routes (isAdmin middleware)
â””â”€â”€ Email Verification Check (for orders)

Layer 4: Data Protection
â”œâ”€â”€ Password Hashing (bcryptjs)
â”œâ”€â”€ OTP Expiry (10 minutes)
â”œâ”€â”€ Input Validation
â””â”€â”€ Prisma (SQL Injection Prevention)

Layer 5: Error Handling
â”œâ”€â”€ Try-Catch Blocks
â”œâ”€â”€ Error Middleware
â””â”€â”€ Safe Error Messages
```

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Production Setup                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frontend (Vercel/Netlify)
â”œâ”€â”€ React Build (Static Files)
â”œâ”€â”€ Environment Variables
â”‚   â””â”€â”€ REACT_APP_API_URL
â””â”€â”€ CDN Distribution

Backend (Vercel/Railway/Render)
â”œâ”€â”€ Node.js Server
â”œâ”€â”€ Environment Variables
â”‚   â”œâ”€â”€ DATABASE_URL
â”‚   â”œâ”€â”€ JWT_ACCESS_SECRET
â”‚   â”œâ”€â”€ JWT_REFRESH_SECRET
â”‚   â”œâ”€â”€ SENDGRID_API_KEY
â”‚   â””â”€â”€ FRONTEND_URL
â””â”€â”€ Prisma Generate (Build Step)

Database (MongoDB Atlas)
â”œâ”€â”€ Cloud Hosted
â”œâ”€â”€ Automatic Backups
â””â”€â”€ IP Whitelist

Email Service (SendGrid)
â”œâ”€â”€ API Key Authentication
â””â”€â”€ Verified Sender Domain
```

---

This architecture provides a scalable, secure, and maintainable e-commerce platform! ğŸš€
